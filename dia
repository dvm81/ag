graph TB
    subgraph Stage1["ğŸ”´ Stage 1: Baseline LLM"]
        A1[Raw Text Input] --> B1[LLM Direct Processing]
        B1 --> C1[Output: Tickers]
        
        D1[/"âš ï¸ Issues:<br/>â€¢ Hallucinations<br/>â€¢ No recent data<br/>â€¢ Context limitations"/]
        
        E1["ğŸ“Š Metrics:<br/>Precision: 0.60<br/>Recall: 0.60<br/>F1: 0.60<br/>âš¡ Speed: ~1 sec"]
    end
    
    subgraph Stage2["ğŸŸ¡ Stage 2: Grounded + Verification"]
        A2[Raw Text Input] --> B2[LLM Processing]
        B2 --> C2[Knowledge Base<br/>Grounding]
        C2 --> D2[Verification Layer]
        D2 --> E2[Validated Tickers]
        
        F2["âœ… Improvements:<br/>â€¢ Real data grounding<br/>â€¢ Double verification<br/>â€¢ High accuracy"]
        
        G2["ğŸ“Š Metrics:<br/>Precision: 0.95<br/>Recall: 0.95<br/>F1: 0.95<br/>ğŸ¢ Speed: ~60 sec"]
    end
    
    subgraph Stage3["ğŸŸ¢ Stage 3: Optimized Pipeline"]
        A3[Raw Text Input] --> B3[Text Chunking]
        B3 --> C3[Parallel Processing]
        C3 --> D3[Knowledge Base<br/>Grounding]
        D3 --> E3[Parallel Verification]
        E3 --> F3[Consolidated Output]
        
        G3["ğŸš€ Optimizations:<br/>â€¢ Smart chunking<br/>â€¢ Parallel execution<br/>â€¢ Batch processing"]
        
        H3["ğŸ“Š Metrics:<br/>Precision: 0.95<br/>Recall: 0.95<br/>F1: 0.95<br/>âš¡ Speed: ~5 sec"]
    end
    
    Stage1 -.->|"Problem:<br/>Low Accuracy"| Stage2
    Stage2 -.->|"Problem:<br/>Too Slow"| Stage3
    
    Result["ğŸ¯ Final Result:<br/>12x faster processing<br/>58% accuracy improvement<br/>Production-ready solution"]
    
    Stage3 ==> Result
    
    style Stage1 fill:#ffe6e6,stroke:#ff6666,stroke-width:2px
    style Stage2 fill:#fff9e6,stroke:#ffcc66,stroke-width:2px
    style Stage3 fill:#e6ffe6,stroke:#66cc66,stroke-width:2px
    style Result fill:#e6f3ff,stroke:#3366cc,stroke-width:3px,color:#000
